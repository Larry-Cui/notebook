
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://paralegal.netlify.app/Computer/algo/2022-8-31-heapsort/">
      
      
      
      
      <link rel="icon" href="../../../assets/img/book-real.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.23">
    
    
      
        <title>Heap Sort - My Notebook</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/css/styled-table.css">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
      <link rel="stylesheet" href="../../../assets/css/icon.css">
    
      <link rel="stylesheet" href="../../../assets/css/extra.css">
    
      <link rel="stylesheet" href="../../../assets/css/other.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="larry-blue" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#definition-and-categories-of-heaps" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="My Notebook" class="md-header__button md-logo" aria-label="My Notebook" data-md-component="logo">
      
  <img src="../../../assets/img/hkadd.jpeg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            My Notebook
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Heap Sort
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="larry-blue" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="larry-blue" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../math/math123/2022-9-03-number/" class="md-tabs__link">
          
  
  
  Math

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../" class="md-tabs__link">
          
  
  
  Computer

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../articles/2024-08-18-NCA/" class="md-tabs__link">
          
  
  
  Laws

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../immigration/epe/EPE%20Practice%20A/" class="md-tabs__link">
          
  
  
  Immigration

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../finance/fewthings/" class="md-tabs__link">
          
  
  
  Finance

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../blog/" class="md-tabs__link">
          
  
  
  Blog

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../.." class="md-tabs__link">
          
  
  
  About

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="My Notebook" class="md-nav__button md-logo" aria-label="My Notebook" data-md-component="logo">
      
  <img src="../../../assets/img/hkadd.jpeg" alt="logo">

    </a>
    My Notebook
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../math/math123/2022-9-03-number/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Math
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Computer
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../articles/2024-08-18-NCA/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Laws
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    
  
  
  
    <a href="../../../immigration/epe/EPE%20Practice%20A/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Immigration
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../finance/fewthings/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Finance
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../blog/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../.." class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#definition-and-categories-of-heaps" class="md-nav__link">
    <span class="md-ellipsis">
      Definition and categories of heaps
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Definition and categories of heaps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#index-and-height-of-a-heap" class="md-nav__link">
    <span class="md-ellipsis">
      index and height of a heap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#max-and-min-heaps" class="md-nav__link">
    <span class="md-ellipsis">
      Max and min heaps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#insert-an-element-to-a-heap" class="md-nav__link">
    <span class="md-ellipsis">
      Insert an element to a heap
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Insert an element to a heap">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#algorithem-in-normal-language" class="md-nav__link">
    <span class="md-ellipsis">
      Algorithem in normal language
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-example" class="md-nav__link">
    <span class="md-ellipsis">
      Code example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#time-complexity-of-heap-insertion" class="md-nav__link">
    <span class="md-ellipsis">
      Time complexity of heap insertion
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-a-heap" class="md-nav__link">
    <span class="md-ellipsis">
      Create a heap
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Create a heap">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#time-complexity" class="md-nav__link">
    <span class="md-ellipsis">
      Time complexity
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#heapify-a-faster-method-to-create-heap" class="md-nav__link">
    <span class="md-ellipsis">
      Heapify: a faster method to create heap
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Heapify: a faster method to create heap">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#time-complexity-of-heapify-method" class="md-nav__link">
    <span class="md-ellipsis">
      Time complexity of heapify method
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deleting-from-heap" class="md-nav__link">
    <span class="md-ellipsis">
      Deleting from Heap
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deleting from Heap">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-we-get-from-deleting-the-heap-array" class="md-nav__link">
    <span class="md-ellipsis">
      What we get from deleting the heap array?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#heap-sort-best-for-priority-queue" class="md-nav__link">
    <span class="md-ellipsis">
      Heap Sort: best for priority queue
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Heap Sort: best for priority queue">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-power-of-heap-sort" class="md-nav__link">
    <span class="md-ellipsis">
      The power of heap sort
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <nav class="md-tags" >
    
      
      
      
        <span class="md-tag">Algorithms</span>
      
    
  </nav>



  <h1>Heap Sort</h1>

<h2 id="definition-and-categories-of-heaps">Definition and categories of heaps</h2>
<p>Heap sort is based on a heap. What is a heap? simply put, it's a way of array order. As heap is not common to our daily life, it's worth to elaborate a bit about the structure of heap.</p>
<p>Heap is a binary tree of numbers, and it a complete one, the definiton/features of which include:</p>
<ul>
<li>nodes cannot have any child if their siblings are not filled yet;</li>
<li>at the same level, if not all nodes are filled with children, then left-side nodes must be filled first;</li>
<li>no child should be appended to any nodes until the nodes of the same level are filled with numbers.</li>
</ul>
<p><img style="display: inline-block; width: 100%; object-fit: cover;" src="https://lh3.googleusercontent.com/31mkKeg9OeglKgBvg5-BMSJ2vCx5L5iDKna1TEZ_rqlI_Z12fJyXhAujLXkq3MSP7QFSVf0AErnNAK4lnskFCNBAnemMmYPD0vIK5ipFDNgjZiJ6fKfydNAJpNgPpNZLjKgHF3KmxA=w2400" alt="insertion sort"/></p>
<div style="display: flex; align-items: flex-start; justify-content: center; font-size: 14px; color: #777;">Complete and Non-complete Binary Tree Illustration</div>

<p><br></p>
<h3 id="index-and-height-of-a-heap">index and height of a heap</h3>
<p>You may have noticed the index order of the binary tree. It's top down and left to right. There's a mathematical connection between a node and its children. For the ease of calculation, we define the first (top) node of a binary tree at index 1.</p>
<p><strong>For node at index i:</strong></p>
<ul>
<li>left child at: <span class="arithmatex">\(2i\)</span></li>
<li>right child at: <span class="arithmatex">\(2i +1\)</span></li>
</ul>
<p><img style="display: inline-block; width: 100%; object-fit: cover;" src="https://lh3.googleusercontent.com/HIe-6tKQGQmaGpbeWDlVJDZBHWR7Jer0HboHhtWnRHoA99g0kqhebtV6rpZ_QJrNefbSaEIU92UB4ZEd2ozZNlhT4poI698aUZft4Gtyz6i-bQyZPgMXHvDrrQtv0fDGNmrcMNzApA=w2400" alt="insertion sort"/></p>
<div style="display: flex; align-items: flex-start; justify-content: center; font-size: 14px; color: #777;">Index of a Heap Tree Illustration</div>

<p><br></p>
<p><strong>For n number occupying an complete binary tree, its height of nodes:</strong></p>
<ul>
<li><span class="arithmatex">\(\log_2 n\)</span></li>
</ul>
<h3 id="max-and-min-heaps">Max and min heaps</h3>
<p>Just as any sorted array can be in a ascending or descending order, so does a heap, but in a slight different way, i.e., max heap and min heap:</p>
<ul>
<li>In a max heap, every node is greater or equal than its children, while in a min heap, every node is less than its children.</li>
<li>Nodes at the same level, siblings, are not necessarily in order.</li>
<li>it's premitted that some children of one node is greater (in max heap) or less (in min heap) than their uncles.</li>
</ul>
<p><img style="display: inline-block; width: 100%; object-fit: cover;" src="https://lh3.googleusercontent.com/GKKmQdl8Awvr09vsgfebsfGGysmnvi3ZUvTWRaetU9twz3P5Rc_YI9_pQrxDVJL-OVz06-nepcpxidk1sc5Sz4gn_83NKIVJxX4yWUvBS0YQmkOR6jxNkfBg-fO59JJSNVSZwVNIsA=w2400" alt="insertion sort"/></p>
<div style="display: flex; align-items: flex-start; justify-content: center; font-size: 14px; color: #777;">Min Heap (left) and Max Heap (right)</div>

<p><br></p>
<p><strong>Heap is not for searching purpose!</strong></p>
<h2 id="insert-an-element-to-a-heap">Insert an element to a heap</h2>
<p>First of all, we record the elements of a heap in an array, in an order as describe above, i.e, starting with the top node as index 1 (or index 0 in JavaScript), then the second layer of nodes as index 2 and 3, then the third layer as index 4-7, and so on.</p>
<h3 id="algorithem-in-normal-language">Algorithem in normal language</h3>
<p>Let's use min heap as an example.</p>
<ul>
<li>We always start by adding the new element to the end of the array.</li>
<li>Next, we compare the new element with its parent node, if the parent is greater than the new element, swap.</li>
<li>Now the new element is in the swapped index, compare it with the upper parent again, swap by the same rule.</li>
<li>If the new element is less than its parent, or it's already at the top node, insertion finishs.</li>
</ul>
<p><img style="display: inline-block; width: 100%; object-fit: cover;" src="https://lh3.googleusercontent.com/SbrcDlWdPtXXWdqJ_THOFYLeROkhtUzR_eTonF0CKKkZaTcK3X6a1wF3rYQyQ38-1bsxTUeig1rEwaMER_fG-ggxCSMAyx9nOFYRGBhTM2-4CeMDNIU4Bk95EmWxPIEYnA9vgUiL-A=w2400" alt="insertion sort"/></p>
<div style="display: flex; align-items: flex-start; justify-content: center; font-size: 14px; color: #777;">Inserting to a Min Heap Illustration</div>

<p><br></p>
<h3 id="code-example">Code example</h3>
<p>Now let's try code the algorith of heap insertion by JavaScript. Here we're using a technique called recursion, and also be noted that this is a max heap.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Heap Insertion</span>

<span class="c1">// we need a swap function</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">swap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span><span class="w"> </span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">arr</span><span class="p">[</span><span class="nx">a</span><span class="p">];</span>
<span class="w">    </span><span class="nx">arr</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">arr</span><span class="p">[</span><span class="nx">b</span><span class="p">];</span>
<span class="w">    </span><span class="nx">arr</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">temp</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// recursive coding</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">insertRecur</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">array</span><span class="p">,</span><span class="w"> </span><span class="nx">index</span><span class="p">,</span><span class="w"> </span><span class="nx">n</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// since JavaScript array starts from 0, we need some adjustment</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">parentNodeIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">((</span><span class="nx">index</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// roll back condition of the recursion</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="nx">parentNodeIndex</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="nx">n</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">index</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="mf">0</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">array</span><span class="p">;</span>

<span class="w">    </span><span class="nx">swap</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span><span class="w"> </span><span class="nx">parentNodeIndex</span><span class="p">,</span><span class="w"> </span><span class="nx">index</span><span class="p">);</span>
<span class="w">    </span><span class="nx">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">parentNodeIndex</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// recursion bichotomy point</span>
<span class="w">    </span><span class="nx">insertRecur</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span><span class="w"> </span><span class="nx">index</span><span class="p">,</span><span class="w"> </span><span class="nx">n</span><span class="p">);</span>
<span class="p">};</span>

<span class="c1">// with swap and insertRecur function</span>
<span class="c1">// we only need to pass info and call these functions</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">insertHeap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">array</span><span class="p">,</span><span class="w"> </span><span class="nx">n</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">array</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">n</span><span class="p">);</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
<span class="w">    </span><span class="nx">insertRecur</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span><span class="w"> </span><span class="nx">index</span><span class="p">,</span><span class="w"> </span><span class="nx">n</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">array</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>
<h3 id="time-complexity-of-heap-insertion">Time complexity of heap insertion</h3>
<p>The insertion procedure takes at most as many steps as the height of the heap binary tree, so the time complexity is <span class="arithmatex">\(\log n\)</span> (short for <span class="arithmatex">\(\log_2 n\)</span>).</p>
<h2 id="create-a-heap">Create a heap</h2>
<p>After we know how to insert new element to a heap, it comes intuitively that we can create a heap by inserting elements to a new array one by one. As a matter of fact, if we are given an un-ordered array and asked to create a heap using these element, we can work within the same array and do some compare and swap jobs as insertion algorithm demands.</p>
<p>Here below is the code practice for creating a heap. For ease of reference, I use a new array instead of working on the origianl one.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Create a heap array</span>
<span class="c1">// we are re-using insertHeap function from above</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">heapArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">n</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Array</span><span class="p">();</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">n</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// here we use numbers by random funtion,</span>
<span class="w">        </span><span class="c1">// we can of course use other sources.</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">element</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">3</span><span class="p">);</span>

<span class="w">        </span><span class="nx">insertHeap</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span><span class="w"> </span><span class="nx">element</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">array</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>
<h3 id="time-complexity">Time complexity</h3>
<p>If we observe from the stand point of the last element, it takes at most <span class="arithmatex">\(\log n\)</span> steps to insert to the heap. As we have <span class="arithmatex">\(n\)</span> elements in total, so the worst scenario is <span class="arithmatex">\(n \log n\)</span>.</p>
<h2 id="heapify-a-faster-method-to-create-heap">Heapify: a faster method to create heap</h2>
<p>There's a clever way to sort the array into a heap without doing insertion one by one, this is called heapify. We will walk through an example to illustrate the algorithm. This example is from <a href="https://www.baeldung.com/cs/binary-tree-max-heapify">Subham Datta's post</a>, and again we are using max heap instance.</p>
<p>Here we have an array: <span class="arithmatex">\([10, 20, 25, 6, 12, 15, 4, 16]\)</span>, the binary tree is like this:</p>
<div style="display: flex; justify-content: center">
<img style="display: inline-block; width: 50%; object-fit: cover;" src="https://lh3.googleusercontent.com/dvWw_pPjWVuclJ0nKa9PsfRCWLYe4nEJBR_lR7h3uQekMd809PeXWPlk0oNNTyoIjqeh-Xf1TGGYg-ufFbdEOJPwXsxt3_l5uAVXc_0rb1I7-DJasRWADn0ymcHi6vm-Ww0lxf2Bhw=w2400" alt="insertion sort"/>
</div>

<p><br></p>
<p><strong>1.</strong> Heapify is a leaf to root process. Check out all leaves at the bottom, nothing is below them, so they are heapified by defintion. now check out the one level above the leaves. We see "6" is less than its child "16", so swap.</p>
<p><img style="display: inline-block; width: 100%; object-fit: cover;" src="https://lh3.googleusercontent.com/ntyvYSvybYRXXMEShDTkKWSorRXvcYMCKXQS3XUdJzSaiBVEuzE2p2GAcSAiYs5w-_Y3LBdKxLyN5VwXH0yFKnYb5JQWCYIExjeM2wLPCnBPEoGNJ771TyTwgrB8pM0vlG9LB-l5lA=w2400" alt="insertion sort"/></p>
<p><strong>2.</strong> look at one level above, number "20" has two children "16" and "12", they are both less "20", so nothing happens here.</p>
<p><img style="display: inline-block; width: 100%; object-fit: cover;" src="https://lh3.googleusercontent.com/fb9jCcAaFjmOjT5iVVJ-7A7_Rd3XBeFaBA5nyLtGtxijEC3rcq4bi3no2jVYQqucCTwMLPt2_M7lE0lxqkuzqkG6JBvEBIrvz05aEocrlPy1-gvuhnV-Ydz_UcRiXWy0Dh-DP0NOPQ=w2400" alt="insertion sort"/></p>
<p><strong>3.</strong> look at another sibling at the same level, number "25" has two children "15" and "4", nothing happens either.</p>
<p><img style="display: inline-block; width: 100%; object-fit: cover;" src="https://lh3.googleusercontent.com/kNdIzOkkhPMMsHaD5mBl5NjKlbHGyQyYlgEowj05q-eHqnDG4s2ZagHkrX2Q4jJMSCyKCv8NeZDEAgXwEhRDrGM35PK0dNW21TdksZE0V2iLkyrvAjPeYLLM1e_6Q-NGtfJKR8TUgQ=w2400" alt="insertion sort"/></p>
<p><strong>4.</strong> Now we reach at the root. Apparently, root "10" is less than its children, but we pick the larger one "25" and swap with "10".</p>
<p><img style="display: inline-block; width: 100%; object-fit: cover;" src="https://lh3.googleusercontent.com/UJAmV5We8_aaeVD7QbAprsBGOHHZjFqQ7b2Q40t4bJED-EWb3VGvvt-NGSxqrCLOBbgWT53kuIofyIcIw0Rrr41UUwqzCuv-BIrXTUocfzlBzm-k3lfpXat3Rwa9Ap4x_xLNYGVtLg=w2400" alt="insertion sort"/></p>
<p><strong>5.</strong> We need to keep an eye on the swaped down element closely. We need to check if it's still smaller than its children in the new position, if not, swap doan again. Here we swap "10" with "15" to make sure it keeps on the right position.</p>
<p><img style="display: inline-block; width: 100%; object-fit: cover;" src="https://lh3.googleusercontent.com/zyH62HVXxk-gVMCZRuGGaCrV7Qq2upTprx_Vhq_BCw31SGb_-2tLJm1gFLt-Sfy_z5MW0Gt9keGL-cmYwo6txSqRGCDkEd2_ZaI6IOfc0PCbVhZXQhcruf1haIap_cFaMo8IZ62VIQ=w2400" alt="insertion sort"/></p>
<h3 id="time-complexity-of-heapify-method">Time complexity of heapify method</h3>
<p>We know the bottom leaves are always good as there are no children below them, which takes half of the total number of elements, <span class="arithmatex">\(n/2\)</span>. For the first floor of the nodes, which has <span class="arithmatex">\(n/4\)</span> in total, will need to be brought down to leaves for one floor distance at the worst scenario. For the second floolr, the number of nodes comes to <span class="arithmatex">\(n/8\)</span>, and distance is 2.</p>
<p>The total moves at worst:
<span class="arithmatex">\(<span class="arithmatex">\(S = \left(0*\frac{n}{2}\right)+\left(1*\frac{n}{4}\right)+\left(2*\frac{n}{8}\right)+ \cdots + \log n * 1\)</span>\)</span></p>
<p>Now we need some calculus skill here:</p>
<div class="arithmatex">\[
\begin{align*}
S&amp;= \sum^{\log n}_{k=1} \frac{kn}{2^{k+1}} = \frac{n}{4} \sum^{\log n}_{k=1} \frac{k}{2^{k-1}}
&lt;  \frac{n}{4} \sum^{\infty}_{k=1} \frac{k}{2^{k-1}} \end{align*}
\]</div>
<p>If we let <span class="arithmatex">\(x=1/2\)</span>, the right most term can be written as:</p>
<div class="arithmatex">\[
\begin{align*}
\frac{n}{4} \sum^{\infty}_{k=1} \frac{k}{2^{k-1}} &amp;= \frac{n}{4} \sum^{\infty}_{k=1} kx^{k-1} \\
&amp;= \frac{n}{4} \frac{d}{dx} \left[\sum^{\infty}_{k=1} x^k \right] \\
&amp;= \frac{n}{4} \frac{d}{dx} \left[\frac{1}{1-x} \right] \\
&amp;= \frac{n}{4} \frac{1}{(1-x)^2} \\
&amp;= n
\end{align*}
\]</div>
<p>So we conclude the complexity is <span class="arithmatex">\(O (n)\)</span>.</p>
<h2 id="deleting-from-heap">Deleting from Heap</h2>
<p>It seems opposite to intuition, but the rule of heap deleting is, you can only delete the root element. In max heap, this is the largest element, in min heap, the smallest.</p>
<p>The procedure of the algorithm goes as follows (max heap):</p>
<ul>
<li>delete the first element (root) from the heap array</li>
<li>now move the last element of the heap array to the root position, which is at index 0 in JavaScript</li>
<li>compare root's two children, find the larger one, and swap position of the larger one with the root element if the child is larger than the root element (Remember: the root element is the element swapped from the last position of the array)</li>
<li>go all way down with the root element, until it's larger than its children.</li>
</ul>
<p><br></p>
<p><img style="display: inline-block; width: 100%; object-fit: cover;" src="https://lh3.googleusercontent.com/AjqdbpX0Po2EwlLfYuzkqWxD9tqpISHy3kKMTFHT_XZWmJRY82DZz7FbhSFRj6DNUoZjpgjTPoBvOygogOaMapRJzYDZdqBllrgURFIBuM1ZB1aL16l8dH2ytUbuu301XhUPLRHJIA=w2400" alt="insertion sort"/></p>
<div style="display: flex; align-items: flex-start; justify-content: center; font-size: 14px; color: #777;">Step 1: "21" is the last of the heap array</div>
<div style="display: flex; align-items: flex-start; justify-content: center; font-size: 14px; color: #777;">Step 2: delete "45", and move "21" to the root position</div>

<p><br></p>
<p><img style="display: inline-block; width: 100%; object-fit: cover;" src="https://lh3.googleusercontent.com/X5Uo8tmqD0gIzyeUm4kah93zWuk8yxVCLzUdCwoGKRUIWnhLZfEii8z8H2IqRCSDtLXsuDGKE-hq0-q6xhK55z4nsbSAHi-szEJk601wG_OFkg3Q8G82ZStfAbroBQMNgiJ3GgZrxg=w2400" alt="insertion sort"/></p>
<div style="display: flex; align-items: flex-start; justify-content: center; font-size: 14px; color: #777;">Step 3: compare children of "21", "42" is larger than "23", so swap "42" with "21"</div>
<div style="display: flex; align-items: flex-start; justify-content: center; font-size: 14px; color: #777;">Step 4: repeat step 3, child "35" is larger than "27", swap "35" with "21"</div>

<p><br></p>
<p>After step 4, "21" has no child, we can stop the procedure, the new heap array is sorted.</p>
<p>Code practice here in JavaScript.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// swap function is here to help swap elements</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">swap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span><span class="w"> </span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">arr</span><span class="p">[</span><span class="nx">a</span><span class="p">];</span>
<span class="w">    </span><span class="nx">arr</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">arr</span><span class="p">[</span><span class="nx">b</span><span class="p">];</span>
<span class="w">    </span><span class="nx">arr</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">temp</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// we use recursive again!</span>
<span class="c1">// the array this heapify function takes in</span>
<span class="c1">// is a heap array except the first element swapped from the last</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">heapify</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// because JavaScript array starts from 0</span>
<span class="w">    </span><span class="c1">// left child is 2 * ( i + 1 ) - 1 = 2 * i + 1</span>
<span class="w">    </span><span class="c1">// right child is 2 * (i + 1 ) + 1 - 1 = 2 * i + 2</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">2</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// roll back conditions for heapify recursive function</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">arr</span><span class="p">[</span><span class="nx">l</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">arr</span><span class="p">[</span><span class="nx">r</span><span class="p">])</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nx">r</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">arr</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// compare child first, then use the larger child to compare with parent</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">arr</span><span class="p">[</span><span class="nx">l</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">arr</span><span class="p">[</span><span class="nx">r</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">arr</span><span class="p">[</span><span class="nx">l</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">swap</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span><span class="w"> </span><span class="nx">l</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="p">);</span>
<span class="w">            </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">l</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">arr</span><span class="p">[</span><span class="nx">r</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">swap</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span><span class="w"> </span><span class="nx">r</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="p">);</span>
<span class="w">            </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">r</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Recursively heapify the affected sub-tree</span>
<span class="w">    </span><span class="c1">// notice &quot;i&quot; has been changed to its child node index</span>
<span class="w">    </span><span class="nx">heapify</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Function to delete root and</span>
<span class="c1">// send array to heapify for further process</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">deleteRoot</span><span class="p">(</span><span class="nx">arr</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// get the root</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">root</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">arr</span><span class="p">[</span><span class="mf">0</span><span class="p">];</span>

<span class="w">    </span><span class="c1">// splice comes back with an array,</span>
<span class="w">    </span><span class="c1">// so we need to get the number out of it</span>
<span class="w">    </span><span class="nx">arr</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">arr</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="o">-</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">1</span><span class="p">)[</span><span class="mf">0</span><span class="p">];</span>

<span class="w">    </span><span class="c1">// heapify(sort) the array</span>
<span class="w">    </span><span class="nx">heapify</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// return heapified array and the deleted root</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Deleted root is: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">root</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">arr</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="what-we-get-from-deleting-the-heap-array">What we get from deleting the heap array?</h3>
<p>Yes, we get an ordered list of numbers. From max heap, we get the numbers in a descending order, and from min heap, we get the numbers in an ascending order.</p>
<h2 id="heap-sort-best-for-priority-queue">Heap Sort: best for priority queue</h2>
<p>Now we have all the bricks for a heap sort algorithm. To implement heap sort on an un-ordered list of numbers:</p>
<ol>
<li>create a heap array by inserting;</li>
<li>delete root of the heap array one by one and copy it somewhere else to get an ordered list of numbers.</li>
</ol>
<p>The time complexity is $n \log n $ for each step, so the total is <span class="arithmatex">\(2n \log n\)</span>, but in practice we still call it <span class="arithmatex">\(n\log n\)</span>.</p>
<h3 id="the-power-of-heap-sort">The power of heap sort</h3>
<p>Suppose you are running a service center. Calls for help coming in every day at different priority level. You need to record each call and dispatch your engineers to meet requirments from those with higher priorities first. How do you register and organize the calls?</p>
<p>You can do it in a linear way:</p>
<ul>
<li>you take notes for each call and just keep them in the order as the time they came in. The time complexity for each registration is <span class="arithmatex">\(O(1)\)</span>.</li>
<li>when your next engineer is available, you do a linear search of your registration book and find the entry with the highest priority. It takes a time complexity of <span class="arithmatex">\(O(n)\)</span>.</li>
</ul>
<p>Or you can do it with heap array:</p>
<ul>
<li>you insert each incoming call into your existing heap array (max heap for example). How much time does it need? <span class="arithmatex">\(O(\log n)\)</span> for heap insertion.</li>
<li>when dispatch, you take the root out of the heap, and modify the array to keep it in a proper manner. How much time does it need? <span class="arithmatex">\(O(\log n)\)</span> for heap delete.</li>
</ul>
<p><strong>In conclusion, heap structure is best for priority queue.</strong></p>
<p><br></p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2021-2025 Haddock
    </div>
  
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://www.youtube.com/" target="_blank" rel="noopener" title="www.youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M549.7 124.1c-6.2-23.7-24.8-42.3-48.3-48.6C458.9 64 288.1 64 288.1 64S117.3 64 74.7 75.5c-23.5 6.3-42 24.9-48.3 48.6C15 167 15 256.4 15 256.4s0 89.4 11.4 132.3c6.3 23.6 24.8 41.5 48.3 47.8C117.3 448 288.1 448 288.1 448s170.8 0 213.4-11.5c23.5-6.3 42-24.2 48.3-47.8 11.4-42.9 11.4-132.3 11.4-132.3s0-89.4-11.4-132.3zM232.2 337.6V175.2l142.7 81.2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.facebook.com/" target="_blank" rel="noopener" title="www.facebook.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256c0 120 82.7 220.8 194.2 248.5V334.2h-52.8V256h52.8v-33.7c0-87.1 39.4-127.5 125-127.5 16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287v175.9C413.8 494.8 512 386.9 512 256"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://instagram.com/@" target="_blank" rel="noopener" title="instagram.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M224.3 141a115 115 0 1 0-.6 230 115 115 0 1 0 .6-230m-.6 40.4a74.6 74.6 0 1 1 .6 149.2 74.6 74.6 0 1 1-.6-149.2m93.4-45.1a26.8 26.8 0 1 1 53.6 0 26.8 26.8 0 1 1-53.6 0m129.7 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8M399 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:info@somewhere.com" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M536.4-26.3c9.8-3.5 20.6-1 28 6.3s9.8 18.2 6.3 28l-178 496.9c-5 13.9-18.1 23.1-32.8 23.1-14.2 0-27-8.6-32.3-21.7l-64.2-158c-4.5-11-2.5-23.6 5.2-32.6l94.5-112.4c5.1-6.1 4.7-15-.9-20.6s-14.6-6-20.6-.9l-112.4 94.3c-9.1 7.6-21.6 9.6-32.6 5.2L38.1 216.8c-13.1-5.3-21.7-18.1-21.7-32.3 0-14.7 9.2-27.8 23.1-32.8z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.instant", "navigation.tracking", "navigation.path", "navigation.prune", "navigation.top", "header.autohide", "navigation.footer", "search.highlight", "search.share", "search.suggest", "content.code.annotate", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../../assets/js/mathjax.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../../../assets/js/pic-selector.js"></script>
      
    
  </body>
</html>